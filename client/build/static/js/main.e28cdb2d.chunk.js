(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,a){e.exports=a(76)},49:function(e,t,a){},50:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),o=(a(49),a(50),a(3)),u=a(11),s=a(39),i=a(43),m=[],p=a(12),d={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},E=Object(u.c)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.setAlert,r=t.alertId;switch(a){case"SET_ALERT":return[].concat(Object(i.a)(e),[n]);case"REMOVE_ALERT":return e.filter(function(e){return e.id!==r});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADED":return Object(p.a)({},e,{isAuthenticated:!0,loading:!1,user:n});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",n.token),Object(p.a)({},e,n,{isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("token"),Object(p.a)({},e,{token:null,isAuthenticated:!1,loading:!1,user:null});default:return e}}}),f=[s.a],h=Object(u.e)(E,{},Object(u.d)(u.a.apply(void 0,f),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),v=a(9),g=a(15),b=a(5),w=a.n(b),O=a(13),N=a(16),y=a.n(N),S=function(e){e?y.a.defaults.headers.common["x-auth-token"]=e:delete y.a.defaults.headers.common["x-auth-token"]},j=a(40),R=a.n(j),A=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=R.a.v4();n({type:"SET_ALERT",setAlert:{msg:e,alertType:t,id:r}}),setTimeout(function(){return n({type:"REMOVE_ALERT",alertId:r})},a)}},_=function(){return function(){var e=Object(O.a)(w.a.mark(function e(t){var a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&S(localStorage.token),e.prev=1,e.next=4,y.a.get("/api/auth");case 4:a=e.sent,t({type:"USER_LOADED",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},k=a(1),T=a.n(k),L=function(e){var t=e.auth,a=(t.isAuthenticated,t.loading,e.logout);r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement("a",{onClick:a,href:"#!"},"Logout")),r.a.createElement("li",null,r.a.createElement(v.b,{to:"/Dashboard"},"Dashboard"))),r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(v.b,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(v.b,{to:"/Register"},"Register")));return r.a.createElement(n.Fragment,null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(v.b,{to:"/",className:"brand-logo"},"Amir Khakipour"))))};L.protoTypes={logout:T.a.func.isRequired,auth:T.a.object.isRequired};var I=Object(o.b)(function(e){return{auth:e.auth}},{logout:function(){return function(e){e({type:"LOGOUT"})}}})(L),x=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("h1",null," 404 "))))},C=a(17),D=a(21),U=function(e){var t=e.login,a=e.isAuthenticated,c=Object(n.useState)({email:"",password:""}),l=Object(D.a)(c,2),o=l[0],u=l[1],s=o.email,i=o.password,m=function(e){return u(Object(p.a)({},o,Object(C.a)({},e.target.name,e.target.value)))},d=function(){var e=Object(O.a)(w.a.mark(function e(a){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t(s,i);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return a?r.a.createElement(g.a,{to:"/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,"Login"),r.a.createElement("form",{className:"col s12",onSubmit:function(e){return d(e)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{value:s,name:"email",type:"email",className:"validate",placeholder:"Email",onChange:function(e){return m(e)}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{value:i,name:"password",type:"password",className:"validate",placeholder:"Password",onChange:function(e){return m(e)}}))),r.a.createElement("input",{type:"submit",className:"btn",value:"Login"}))))};U.protoType={login:T.a.func.isRequired,isAuthenticated:T.a.bool};var F=Object(o.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},{login:function(e,t){return function(){var a=Object(O.a)(w.a.mark(function a(n){var r,c,l,o;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,y.a.post("/api/auth",c,r);case 5:l=a.sent,n({type:"LOGIN_SUCCESS",payload:l.data}),n(_()),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(2),(o=a.t0.response.data.errors)&&o.forEach(function(e){return n(A(e.msg,"red"))}),n({type:"LOGIN_FAIL"});case 15:case"end":return a.stop()}},a,null,[[2,10]])}));return function(e){return a.apply(this,arguments)}}()}})(U),G=(Object(o.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},{setAlert:A,register:function(e){var t=e.name,a=e.email,n=e.password;return function(){var e=Object(O.a)(w.a.mark(function e(r){var c,l,o,u;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Content-Type":"application/json"}},l=JSON.stringify({name:t,email:a,password:n}),e.prev=2,e.next=5,y.a.post("/api/users",l,c);case 5:o=e.sent,r({type:"REGISTER_SUCCESS",payload:o.data}),r(_()),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),(u=e.t0.response.data.errors)&&u.forEach(function(e){return r(A(e.msg,"red"))}),r({type:"REGISTER_FAIL"});case 15:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}()}})(function(e){var t=e.setAlert,a=e.register,c=e.isAuthenticated,l=Object(n.useState)({name:"",email:"",password:"",password2:""}),o=Object(D.a)(l,2),u=o[0],s=o[1],i=u.name,m=u.email,d=u.password,E=u.password2,f=function(e){return s(Object(p.a)({},u,Object(C.a)({},e.target.name,e.target.value)))},h=function(){var e=Object(O.a)(w.a.mark(function e(n){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),d!==E?t("Passwords do not match","pink",3e3):a({name:i,email:m,password:d});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return c?r.a.createElement(g.a,{to:"/dashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:function(e){return h(e)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{value:i,name:"name",type:"text",className:"validate",placeholder:"Name",onChange:function(e){return f(e)}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{value:m,name:"email",type:"email",className:"validate",placeholder:"Email",onChange:function(e){return f(e)}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{value:d,name:"password",type:"password",className:"validate",placeholder:"Password",onChange:function(e){return f(e)}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{value:E,name:"password2",type:"password",className:"validate",placeholder:"Repete Password",onChange:function(e){return f(e)}}))),r.a.createElement("input",{type:"submit",className:"btn",value:"Register"}))))}),Object(o.b)(function(e){return{alerts:e.alert}})(function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map(function(e){return r.a.createElement("div",{key:e.id,className:"".concat(e.alertType)},e.msg)})})),q=function(e){var t=e.auth.user;return r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Dashboard"),r.a.createElement("h4",null,"Welcome ",t&&t.name))};q.protoType={auth:T.a.object.isRequired};var J=Object(o.b)(function(e){return{auth:e.auth}},null)(q),P=a(42),V=Object(o.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=a.isAuthenticated,c=a.loading,l=Object(P.a)(e,["component","auth"]);return r.a.createElement(g.b,Object.assign({},l,{render:function(e){return n||c?r.a.createElement(t,e):r.a.createElement(g.a,{to:"/login"})}}))});localStorage.token&&S(localStorage.token);var X=function(){return Object(n.useEffect)(function(){h.dispatch(_())},[]),r.a.createElement(o.a,{store:h},r.a.createElement(v.a,null,r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-header"},r.a.createElement(I,null)),r.a.createElement("section",{className:"container"},r.a.createElement(G,null),r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/login",component:F}),r.a.createElement(V,{exact:!0,path:"/dashboard",component:J}),r.a.createElement(g.b,{component:x}))))))};l.a.render(r.a.createElement(X,null),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.e28cdb2d.chunk.js.map